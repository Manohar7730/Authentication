class PostComments{constructor(e){this.postId=e,this.postContainer=$(`#post-${e}`),this.newCommentForm=$(`#post-${e}-comments-form`),this.createComment(e);let t=this;$(" .delete-comment-button",this.postContainer).each((function(){t.deleteComment($(this))}))}createComment(e){let t=this;this.newCommentForm.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/comment/create",data:$(this).serialize(),success:function(e){let n=t.newCommentDom(e.data.comment,e.data.post);$(`#post-comment-${t.postId}`).prepend(n),t.deleteComment($(" .delete-comment-button",n)),new ToggleLike($(" .toggle-like-button",n)),showNoty("success","comment added!"),t.newCommentForm[0].reset()},error:function(e){console.log(e.responseText)}})}))}newCommentDom(e,t){return $(`<li class="comment-item" id="comment-${e._id}">\n            <p class="comment-item-content">\n                <small><a class="delete-comment-button" href="/comment/delete/${t._id}/${e._id}">X</a></small>\n                ${e.content}\n            </p>\n            <small id="comment-user-name">${e.user.name}</small>\n            <br>\n            <small>\n              <a class="toggle-like-button" data-likes="${e.likes.length}" href="/likes/toggle/?id=${e._id}&type=Comment">\n                ${e.likes.length} Likes\n              </a>\n            </small>\n        </li>`)}deleteComment(e){$(e).click((function(t){t.preventDefault();let n=$(e).attr("href").split("/").pop();$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#comment-${n}`).remove(),showNoty("success","comment removed")},error:function(e){console.log(e.responseText)}})}))}}